# TODO API üìù

Una API RESTful robusta para gesti√≥n de tareas construida con **TypeScript**, **Express.js**, **Bun** y soporte para m√∫ltiples bases de datos. Implementa patrones de dise√±o modernos y mejores pr√°cticas para el desarrollo de APIs escalables.

![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)
![Bun](https://img.shields.io/badge/Bun-000000?style=for-the-badge&logo=bun&logoColor=white)
![Express.js](https://img.shields.io/badge/Express.js-000000?style=for-the-badge&logo=express&logoColor=white)
![MongoDB](https://img.shields.io/badge/MongoDB-4EA94B?style=for-the-badge&logo=mongodb&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=for-the-badge&logo=postgresql&logoColor=white)

## üöÄ Caracter√≠sticas

- ‚úÖ **CRUD completo** para tareas con validaciones robustas
- ‚úÖ **M√∫ltiples bases de datos**: Soporte para Memory, MongoDB (Mongoose) y PostgreSQL (Prisma)
- ‚úÖ **Filtrado avanzado** por estado, prioridad, fecha y b√∫squeda de texto
- ‚úÖ **Paginaci√≥n** con metadatos completos
- ‚úÖ **Ordenamiento** por m√∫ltiples campos
- ‚úÖ **Operaciones en lote** (completar/eliminar m√∫ltiples tareas)
- ‚úÖ **Estad√≠sticas** y m√©tricas de productividad
- ‚úÖ **Resumen diario** con recomendaciones inteligentes
- ‚úÖ **Manejo de errores** centralizado y detallado
- ‚úÖ **Validaciones** exhaustivas con mensajes descriptivos
- ‚úÖ **Arquitectura escalable** con patrones de dise√±o
- ‚úÖ **Documentaci√≥n** autodescriptiva y colecci√≥n Postman
- ‚úÖ **TypeScript** para type safety completo
- ‚úÖ **Flexible deployment** con configuraci√≥n por variables de entorno

## üèóÔ∏è Arquitectura

El proyecto implementa varios patrones de dise√±o para mantener el c√≥digo limpio y escalable:

### Patrones Implementados

- **üé≠ Facade Pattern**: `TaskFacade` centraliza la l√≥gica de negocio compleja
- **üè≠ Factory Pattern**: `RepositoryFactory` y `TaskFactory` para creaci√≥n de objetos
- **üì¶ Repository Pattern**: Abstracci√≥n de almacenamiento con m√∫ltiples implementaciones
- **üîß Service Pattern**: L√≥gica de negocio en `TaskService`
- **üîß Middleware Pattern**: Validaciones y manejo de errores modular

### Estructura del Proyecto

```
todo-api/
‚îú‚îÄ‚îÄ üì¶ package.json
‚îú‚îÄ‚îÄ ‚öôÔ∏è tsconfig.json
‚îú‚îÄ‚îÄ üóÑÔ∏è prisma/
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma         # Schema de Prisma para PostgreSQL
‚îú‚îÄ‚îÄ üìÇ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ üîÑ populate-db.ts     # Script para poblar la BD
‚îÇ   ‚îî‚îÄ‚îÄ üìä test_data.json     # Datos de prueba
‚îú‚îÄ‚îÄ üìÇ src/
‚îÇ   ‚îú‚îÄ‚îÄ üéØ index.ts              # Punto de entrada
‚îÇ   ‚îú‚îÄ‚îÄ ‚ö° app.ts                 # Configuraci√≥n de Express
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üîó connection.ts     # Configuraci√≥n de BD
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üõ£Ô∏è index.ts           # Router principal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üéØ taskRoutes.ts      # Rutas de tareas
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ controllers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üéÆ TaskController.ts  # Controladores HTTP
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ facades/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üé≠ TaskFacade.ts      # L√≥gica de negocio compleja
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üîß TaskService.ts     # L√≥gica de aplicaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ repositories/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üíæ TaskRepository.memory.ts    # Repositorio en memoria
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üçÉ TaskRepository.mongoose.ts  # Repositorio MongoDB
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üêò TaskRepository.prisma.ts    # Repositorio PostgreSQL
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ factories/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üè≠ RepositoryFactory.ts  # Factory para repositorios
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üè≠ TaskFactory.ts        # Factory para tareas
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ interfaces/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìã ITaskRepository.ts    # Interfaz del repositorio
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìã ITaskService.ts       # Interfaz del servicio
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìä Task.ts               # Modelos y tipos
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‚ùå errorHandler.ts       # Manejo global de errores
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ‚úÖ validation.ts         # Middlewares de validaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ utils/
‚îÇ       ‚îú‚îÄ‚îÄ üîç validators.ts         # Funciones de validaci√≥n
‚îÇ       ‚îî‚îÄ‚îÄ üì§ responseHelper.ts     # Helpers para respuestas
‚îú‚îÄ‚îÄ üìÇ tests/                       # Tests unitarios
‚îú‚îÄ‚îÄ üìÇ docs/                        # Documentaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ üìñ api.md                   # Documentaci√≥n de API
‚îÇ   ‚îî‚îÄ‚îÄ üìÆ postman_collection.json  # Colecci√≥n Postman
‚îî‚îÄ‚îÄ üìÑ README.md                    # Este archivo
```

## üöÄ Inicio R√°pido

### Prerrequisitos

- **Bun** >= 1.0.0 ([Instalar Bun](https://bun.sh/docs/installation))
- **Node.js** >= 18.0.0 (como alternativa)
- **MongoDB** (opcional, para usar con Mongoose)
- **PostgreSQL** (opcional, para usar con Prisma)

### Instalaci√≥n

1. **Clonar el repositorio**
   ```bash
   git clone https://github.com/kmikodev/todo-api.git
   cd todo-api
   ```

2. **Instalar dependencias**
   ```bash
   bun install
   ```

3. **Configurar variables de entorno**
   ```bash
   cp .env.example .env
   # Editar .env con tu configuraci√≥n
   ```

4. **Elegir tipo de base de datos**
   
   **Opci√≥n A: Usar almacenamiento en memoria (default)**
   ```bash
   export TODO_API_DB=memory
   bun run dev
   ```

   **Opci√≥n B: Usar MongoDB con Mongoose**
   ```bash
   export TODO_API_DB=mongoose
   export MONGODB_URI=mongodb://localhost:27017/tasks
   bun run dev
   ```

   **Opci√≥n C: Usar PostgreSQL con Prisma**
   ```bash
   export TODO_API_DB=prisma
   export DATABASE_URL="postgresql://user:password@localhost:5432/tasks"
   bunx prisma generate
   bunx prisma db push
   bun run dev
   ```

5. **Poblar la base de datos (opcional)**
   ```bash
   bun run scripts/populate-db.ts
   ```

¬°La API estar√° disponible en `http://localhost:3000`! üéâ

## üóÑÔ∏è Configuraci√≥n de Base de Datos

### Variables de Entorno

Crea un archivo `.env` en la ra√≠z del proyecto:

```bash
# Configuraci√≥n del servidor
PORT=3000
NODE_ENV=development

# Tipo de base de datos: memory | mongoose | prisma
TODO_API_DB=memory

# MongoDB (para Mongoose)
MONGODB_URI=mongodb://localhost:27017/tasks

# PostgreSQL (para Prisma)
DATABASE_URL="postgresql://user:password@localhost:5432/tasks"

# Configuraci√≥n CORS
CORS_ORIGIN=*

# Logs
LOG_LEVEL=info
```

### Configuraci√≥n de Prisma

Si usas PostgreSQL, el archivo `prisma/schema.prisma` est√° configurado:

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Task {
  id          String    @id @default(cuid())
  title       String
  description String?
  completed   Boolean   @default(false)
  priority    Priority  @default(MEDIUM)
  dueDate     DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt

  @@map("tasks")
}

enum Priority {
  LOW
  MEDIUM
  HIGH

  @@map("priority")
}
```

## üìö Uso de la API

### Endpoints Principales

#### üìã Gesti√≥n de Tareas

```bash
# Obtener todas las tareas
GET /api/tasks

# Obtener tarea espec√≠fica
GET /api/tasks/:id

# Crear nueva tarea
POST /api/tasks

# Actualizar tarea
PUT /api/tasks/:id
PATCH /api/tasks/:id

# Eliminar tarea
DELETE /api/tasks/:id
```

#### üîç Filtrado y B√∫squeda

```bash
# Filtrar por estado
GET /api/tasks?completed=true

# Filtrar por prioridad
GET /api/tasks?priority=high

# B√∫squeda de texto
GET /api/tasks?search=importante

# Filtrar por rango de fechas
GET /api/tasks?dueDateFrom=2024-01-01&dueDateTo=2024-01-31

# Paginaci√≥n
GET /api/tasks?page=1&limit=10

# Ordenamiento
GET /api/tasks?sortBy=dueDate&sortOrder=asc
```

#### üìä Estad√≠sticas y An√°lisis

```bash
# Estad√≠sticas generales
GET /api/tasks/stats

# Resumen diario con recomendaciones
GET /api/tasks/daily-summary

# Tareas vencidas
GET /api/tasks/overdue

# Tareas que vencen hoy
GET /api/tasks/due-today
```

#### ‚ö° Acciones R√°pidas

```bash
# Marcar como completada
PATCH /api/tasks/:id/complete

# Marcar como pendiente
PATCH /api/tasks/:id/incomplete

# Cambiar prioridad
PATCH /api/tasks/:id/priority

# Actualizar fecha de vencimiento
PATCH /api/tasks/:id/due-date

# Duplicar tarea
POST /api/tasks/:id/duplicate
```

#### üîÑ Operaciones en Lote

```bash
# Completar m√∫ltiples tareas
POST /api/tasks/bulk/complete

# Eliminar m√∫ltiples tareas
POST /api/tasks/bulk/delete

# Eliminar todas las completadas
DELETE /api/tasks/bulk/completed
```

### Ejemplo de Uso Completo

```bash
# 1. Crear una tarea urgente
curl -X POST http://localhost:3000/api/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Completar presentaci√≥n",
    "description": "Preparar slides para reuni√≥n ejecutiva",
    "priority": "high",
    "dueDate": "2024-12-31T17:00:00.000Z"
  }'

# 2. Buscar tareas urgentes pendientes
curl "http://localhost:3000/api/tasks?completed=false&priority=high&sortBy=dueDate&sortOrder=asc"

# 3. Obtener resumen diario
curl http://localhost:3000/api/tasks/daily-summary

# 4. Ver estad√≠sticas
curl http://localhost:3000/api/tasks/stats
```

## üß™ Testing

```bash
# Ejecutar todos los tests
bun test

# Tests en modo watch
bun run test:watch

# Tests con coverage
bun test --coverage

# Linting
bun run lint

# Formateo de c√≥digo
bun run format
```

## üìÆ Colecci√≥n Postman

Importa la colecci√≥n completa desde `docs/postman_collection.json` que incluye:

- ‚úÖ Todos los endpoints documentados
- ‚úÖ Ejemplos de datos de prueba
- ‚úÖ Tests de validaci√≥n de errores
- ‚úÖ Variables de entorno configuradas
- ‚úÖ Scripts de automatizaci√≥n

## üöÄ Despliegue

### Desarrollo Local

```bash
# Modo desarrollo con hot reload
bun run dev

# Modo producci√≥n
bun run start
```

### Docker

```dockerfile
FROM oven/bun:1-alpine

WORKDIR /app

# Copiar archivos de dependencias
COPY package.json bun.lockb ./
RUN bun install --frozen-lockfile

# Copiar c√≥digo fuente
COPY . .

# Si usas Prisma, generar cliente
RUN if [ "$TODO_API_DB" = "prisma" ]; then bunx prisma generate; fi

EXPOSE 3000

CMD ["bun", "src/index.ts"]
```

### Variables de Entorno para Producci√≥n

```bash
NODE_ENV=production
PORT=3000
TODO_API_DB=prisma
DATABASE_URL="postgresql://user:password@db:5432/tasks"
CORS_ORIGIN="https://tu-frontend.com"
```

## üèõÔ∏è Arquitectura Detallada

### Flujo de Datos

```
Request ‚Üí Routes ‚Üí Validation ‚Üí Controller ‚Üí Facade ‚Üí Service ‚Üí Repository ‚Üí Database
                     ‚Üì                                           ‚Üì
                 Error Handler ‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê‚Üê
```

### Capas de la Aplicaci√≥n

1. **üåê Capa de Presentaci√≥n** (`routes/`, `controllers/`)
   - Manejo de HTTP requests/responses
   - Validaci√≥n de entrada
   - Serializaci√≥n de datos

2. **üéØ Capa de L√≥gica de Negocio** (`facades/`)
   - Reglas de negocio complejas
   - Coordinaci√≥n entre servicios
   - Validaciones avanzadas

3. **üîß Capa de Servicios** (`services/`)
   - L√≥gica de aplicaci√≥n
   - Orquestaci√≥n de operaciones
   - Validaciones de negocio

4. **üè≠ Capa de Acceso a Datos** (`repositories/`)
   - Abstracci√≥n de almacenamiento
   - M√∫ltiples implementaciones
   - Operaciones CRUD

5. **üîß Capa de Utilidades** (`utils/`, `middleware/`)
   - Funciones auxiliares
   - Middleware compartido
   - Manejo de errores

## üõ°Ô∏è Seguridad y Mejores Pr√°cticas

- **üîí Helmet.js**: Headers de seguridad HTTP
- **üåê CORS**: Configuraci√≥n flexible de CORS
- **‚úÖ Validaci√≥n**: Sanitizaci√≥n exhaustiva de entrada
- **‚ùå Manejo de Errores**: Sin exposici√≥n de informaci√≥n sensible
- **üìè Rate Limiting**: Preparado para implementar
- **üîê TypeScript**: Tipado fuerte para prevenir errores
- **üèóÔ∏è Arquitectura**: Separaci√≥n clara de responsabilidades

## üîÑ Pr√≥ximas Funcionalidades

- [ ] üîê Sistema de autenticaci√≥n JWT
- [ ] üë• Gesti√≥n de usuarios y equipos
- [ ] üîÑ Tareas recurrentes y plantillas
- [ ] üìé Sistema de adjuntos y comentarios
- [ ] üîî Sistema de notificaciones
- [ ] üìä Dashboard analytics avanzado
- [ ] üåê API GraphQL como alternativa
- [ ] üì± WebSocket para actualizaciones en tiempo real
- [ ] ü§ñ IA para sugerencias de productividad
- [ ] üìà M√©tricas de rendimiento con Prometheus

## ü§ù Contribuir

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

### Convenciones de C√≥digo

- **ESLint** y **Prettier** configurados
- **Conventional Commits** para mensajes
- **TypeScript strict mode** habilitado
- **Tests unitarios** requeridos para nuevas funcionalidades
- **Documentaci√≥n** actualizada para cambios en API

## üìù Scripts Disponibles

```bash
# Desarrollo
bun run dev          # Servidor con hot reload
bun run start        # Servidor de producci√≥n

# Testing
bun test             # Ejecutar tests
bun run test:watch   # Tests en modo watch
bun run test:coverage # Tests con coverage

# Base de datos
bun run db:generate  # Generar cliente Prisma
bun run db:push      # Aplicar cambios al schema
bun run db:studio    # Abrir Prisma Studio
bun run db:seed      # Poblar base de datos

# Calidad de c√≥digo
bun run lint         # Linting
bun run format       # Formatear c√≥digo
bun run typecheck    # Verificar tipos
```

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT - ver el archivo [LICENSE.md](LICENSE.md) para detalles.

## üë®‚Äçüíª Autor

**Jaime Cardona**
- GitHub: [@kmikodev](https://github.com/kmikodev)
- LinkedIn: [Jaime Cardona](https://www.linkedin.com/in/jaime-cardona-villegas/)
- Email: jcardonavillegas@gmail.com

## üôè Agradecimientos

- [Bun](https://bun.sh/) por el runtime ultrarr√°pido de JavaScript
- [Express.js](https://expressjs.com/) por el framework web robusto
- [TypeScript](https://www.typescriptlang.org/) por el tipado est√°tico
- [Prisma](https://www.prisma.io/) por el ORM moderno
- [Mongoose](https://mongoosejs.com/) por el ODM de MongoDB
- La comunidad open source por las herramientas incre√≠bles

---

‚≠ê Si este proyecto te resulta √∫til, ¬°dale una estrella en GitHub!

## üìä Estado del Proyecto

![GitHub last commit](https://img.shields.io/github/last-commit/kmikodev/todo-api)
![GitHub issues](https://img.shields.io/github/issues/kmikodev/todo-api)
![GitHub stars](https://img.shields.io/github/stars/kmikodev/todo-api)
![GitHub forks](https://img.shields.io/github/forks/kmikodev/todo-api)

**Versi√≥n Actual:** 1.0.0  
**Estado:** Estable y listo para producci√≥n  
**√öltima Actualizaci√≥n:** 18 de Junio del 2025