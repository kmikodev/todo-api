# TODO API Documentation üìñ

Documentaci√≥n completa de la API REST para gesti√≥n de tareas.

## üìã Tabla de Contenidos

- [Informaci√≥n General](#informaci√≥n-general)
- [Autenticaci√≥n](#autenticaci√≥n)
- [Formato de Respuestas](#formato-de-respuestas)
- [Manejo de Errores](#manejo-de-errores)
- [Endpoints](#endpoints)
  - [Health Check](#health-check)
  - [Informaci√≥n de la API](#informaci√≥n-de-la-api)
  - [Gesti√≥n de Tareas](#gesti√≥n-de-tareas)
  - [Estad√≠sticas](#estad√≠sticas)
  - [Operaciones en Lote](#operaciones-en-lote)
  - [B√∫squeda y Filtros](#b√∫squeda-y-filtros)
- [C√≥digos de Error](#c√≥digos-de-error)
- [Rate Limiting](#rate-limiting)
- [Ejemplos de Uso](#ejemplos-de-uso)

## üåê Informaci√≥n General

**URL Base:** `http://localhost:3000/api`

**Versi√≥n:** v1.0.0

**Content-Type:** `application/json`

**M√©todos HTTP Soportados:** GET, POST, PUT, PATCH, DELETE

## üîê Autenticaci√≥n

Actualmente la API no requiere autenticaci√≥n. En futuras versiones se implementar√°:
- JWT tokens
- API keys
- OAuth 2.0

## üì§ Formato de Respuestas

### Respuesta Exitosa

```json
{
  "success": true,
  "data": {
    // Datos de la respuesta
  },
  "message": "Operaci√≥n realizada exitosamente",
  "meta": {
    "timestamp": "2024-01-15T10:30:00.000Z",
    "pagination": {
      "page": 1,
      "limit": 10,
      "total": 50,
      "totalPages": 5,
      "hasNext": true,
      "hasPrev": false
    }
  }
}
```

### Respuesta de Error

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Los datos proporcionados no son v√°lidos",
    "details": {
      "errors": ["title is required", "priority must be one of: low, medium, high"]
    }
  },
  "meta": {
    "timestamp": "2024-01-15T10:30:00.000Z"
  }
}
```

## ‚ùå Manejo de Errores

### C√≥digos de Estado HTTP

- `200` - OK
- `201` - Created
- `400` - Bad Request
- `404` - Not Found
- `409` - Conflict
- `422` - Unprocessable Entity
- `500` - Internal Server Error

### C√≥digos de Error Personalizados

| C√≥digo | Descripci√≥n |
|--------|-------------|
| `VALIDATION_ERROR` | Error de validaci√≥n de datos |
| `NOT_FOUND` | Recurso no encontrado |
| `DUPLICATE_ERROR` | Recurso duplicado |
| `BULK_LIMIT_EXCEEDED` | L√≠mite de operaciones en lote excedido |
| `INTERNAL_ERROR` | Error interno del servidor |

## üîó Endpoints

### Health Check

#### GET `/health`

Verifica el estado de la API.

**Respuesta:**
```json
{
  "status": "OK",
  "message": "TODO API is running",
  "timestamp": "2024-01-15T10:30:00.000Z",
  "uptime": 3600
}
```

### Informaci√≥n de la API

#### GET `/api/`

Obtiene informaci√≥n general de la API y documentaci√≥n.

**Respuesta:**
```json
{
  "message": "Welcome to TODO API",
  "version": "1.0.0",
  "documentation": {
    "swagger": "/api/docs",
    "endpoints": {
      "tasks": "/api/tasks",
      "health": "/health"
    }
  },
  "features": [
    "Create, read, update, delete tasks",
    "Filter tasks by completion status and priority",
    "Search tasks by title and description",
    "Sort tasks by various fields",
    "Pagination support",
    "Task statistics",
    "Bulk operations"
  ]
}
```

#### GET `/api/info`

Informaci√≥n t√©cnica detallada de la API.

**Respuesta:**
```json
{
  "name": "TODO API",
  "version": "1.0.0",
  "description": "A RESTful API for managing TODO tasks",
  "technologies": ["Node.js", "Express.js", "TypeScript", "Bun"],
  "patterns": ["Facade Pattern", "Factory Pattern", "Repository Pattern"],
  "uptime": 3600,
  "environment": "development"
}
```

### Gesti√≥n de Tareas

#### GET `/api/tasks`

Obtiene todas las tareas con filtros opcionales.

**Par√°metros de Query:**

| Par√°metro | Tipo | Descripci√≥n | Ejemplo |
|-----------|------|-------------|---------|
| `page` | number | N√∫mero de p√°gina (default: 1) | `?page=2` |
| `limit` | number | Elementos por p√°gina (default: 10, max: 100) | `?limit=20` |
| `completed` | boolean | Filtrar por estado de completado | `?completed=true` |
| `priority` | string | Filtrar por prioridad (low, medium, high) | `?priority=high` |
| `search` | string | B√∫squeda en t√≠tulo y descripci√≥n | `?search=importante` |
| `sortBy` | string | Campo de ordenamiento | `?sortBy=dueDate` |
| `sortOrder` | string | Orden (asc, desc) | `?sortOrder=desc` |

**Ejemplo:**
```bash
GET /api/tasks?completed=false&priority=high&page=1&limit=5
```

**Respuesta:**
```json
{
  "success": true,
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "title": "Completar proyecto",
      "description": "Finalizar el desarrollo de la API",
      "completed": false,
      "priority": "high",
      "dueDate": "2024-01-20T23:59:59.999Z",
      "createdAt": "2024-01-15T10:30:00.000Z",
      "updatedAt": "2024-01-15T10:30:00.000Z"
    }
  ],
  "message": "Tasks retrieved successfully",
  "meta": {
    "timestamp": "2024-01-15T10:30:00.000Z",
    "pagination": {
      "page": 1,
      "limit": 5,
      "total": 25,
      "totalPages": 5,
      "hasNext": true,
      "hasPrev": false
    }
  }
}
```

#### GET `/api/tasks/:id`

Obtiene una tarea espec√≠fica por ID.

**Par√°metros:**
- `id` (string, required): UUID de la tarea

**Respuesta:**
```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "title": "Completar proyecto",
    "description": "Finalizar el desarrollo de la API",
    "completed": false,
    "priority": "high",
    "dueDate": "2024-01-20T23:59:59.999Z",
    "createdAt": "2024-01-15T10:30:00.000Z",
    "updatedAt": "2024-01-15T10:30:00.000Z"
  },
  "message": "Task retrieved successfully"
}
```

#### POST `/api/tasks`

Crea una nueva tarea.

**Body:**
```json
{
  "title": "Nueva tarea",
  "description": "Descripci√≥n opcional",
  "priority": "medium",
  "dueDate": "2024-01-20T23:59:59.999Z"
}
```

**Campos:**

| Campo | Tipo | Requerido | Descripci√≥n |
|-------|------|-----------|-------------|
| `title` | string | ‚úÖ | T√≠tulo de la tarea (1-200 caracteres) |
| `description` | string | ‚ùå | Descripci√≥n (max 1000 caracteres) |
| `completed` | boolean | ‚ùå | Estado de completado (default: false) |
| `priority` | string | ‚ùå | Prioridad: low, medium, high (default: medium) |
| `dueDate` | string | ‚ùå | Fecha de vencimiento en formato ISO |

**Respuesta:**
```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440001",
    "title": "Nueva tarea",
    "description": "Descripci√≥n opcional",
    "completed": false,
    "priority": "medium",
    "dueDate": "2024-01-20T23:59:59.999Z",
    "createdAt": "2024-01-15T10:30:00.000Z",
    "updatedAt": "2024-01-15T10:30:00.000Z"
  },
  "message": "Task created successfully"
}
```

#### PUT `/api/tasks/:id`

Actualiza una tarea completa.

**Body:**
```json
{
  "title": "Tarea actualizada",
  "description": "Nueva descripci√≥n",
  "completed": true,
  "priority": "high",
  "dueDate": "2024-01-25T23:59:59.999Z"
}
```

#### PATCH `/api/tasks/:id`

Actualiza parcialmente una tarea.

**Body:**
```json
{
  "completed": true
}
```

#### DELETE `/api/tasks/:id`

Elimina una tarea.

**Respuesta:**
```json
{
  "success": true,
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000"
  },
  "message": "Task deleted successfully"
}
```

### Operaciones de Estado

#### PATCH `/api/tasks/:id/complete`

Marca una tarea como completada.

#### PATCH `/api/tasks/:id/incomplete`

Marca una tarea como no completada.

#### PATCH `/api/tasks/:id/priority`

Actualiza solo la prioridad de una tarea.

**Body:**
```json
{
  "priority": "high"
}
```

#### PATCH `/api/tasks/:id/due-date`

Actualiza solo la fecha de vencimiento.

**Body:**
```json
{
  "dueDate": "2024-01-25T23:59:59.999Z"
}
```

### Estad√≠sticas

#### GET `/api/tasks/stats`

Obtiene estad√≠sticas de las tareas.

**Respuesta:**
```json
{
  "success": true,
  "data": {
    "total": 50,
    "completed": 25,
    "pending": 25,
    "overdue": 5,
    "byPriority": {
      "low": 15,
      "medium": 20,
      "high": 15
    },
    "completionRate": 50.0
  },
  "message": "Task statistics retrieved successfully"
}
```

### Operaciones en Lote

#### POST `/api/tasks/bulk/complete`

Marca m√∫ltiples tareas como completadas.

**Body:**
```json
{
  "ids": [
    "550e8400-e29b-41d4-a716-446655440000",
    "550e8400-e29b-41d4-a716-446655440001"
  ]
}
```

**Respuesta:**
```json
{
  "success": true,
  "data": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "title": "Tarea 1",
      "completed": true,
      // ... otros campos
    }
  ],
  "message": "2 tasks marked as completed"
}
```

#### DELETE `/api/tasks/bulk/completed`

Elimina todas las tareas completadas.

**Respuesta:**
```json
{
  "success": true,
  "data": {
    "deletedCount": 15
  },
  "message": "15 completed tasks deleted"
}
```

#### POST `/api/tasks/bulk/delete`

Elimina m√∫ltiples tareas.

**Body:**
```json
{
  "ids": [
    "550e8400-e29b-41d4-a716-446655440000",
    "550e8400-e29b-41d4-a716-446655440001"
  ]
}
```

### B√∫squeda y Filtros Especializados

#### GET `/api/tasks/search/:term`

Busca tareas por t√©rmino espec√≠fico.

**Ejemplo:**
```bash
GET /api/tasks/search/importante?page=1&limit=10
```

#### GET `/api/tasks/priority/:priority`

Obtiene tareas por prioridad espec√≠fica.

**Ejemplo:**
```bash
GET /api/tasks/priority/high
```

#### GET `/api/tasks/completed/:status`

Obtiene tareas por estado de completado.

**Ejemplo:**
```bash
GET /api/tasks/completed/true
```

#### GET `/api/tasks/overdue`

Obtiene tareas vencidas.

#### GET `/api/tasks/due-today`

Obtiene tareas que vencen hoy.

### Operaciones Especiales

#### POST `/api/tasks/:id/duplicate`

Duplica una tarea existente.

**Body (opcional):**
```json
{
  "title": "Nuevo t√≠tulo para la copia"
}
```

## üö¶ Rate Limiting

- **L√≠mite por IP:** 100 requests por minuto
- **L√≠mite de operaciones en lote:** M√°ximo 100 elementos por operaci√≥n
- **Tama√±o m√°ximo de body:** 1MB

## üìä C√≥digos de Error Detallados

### Errores de Validaci√≥n (400)

```json
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed",
    "details": {
      "errors": [
        "title is required",
        "title must be at least 1 characters long",
        "priority must be one of: low, medium, high"
      ]
    }
  }
}
```

### Recurso No Encontrado (404)

```json
{
  "success": false,
  "error": {
    "code": "NOT_FOUND",
    "message": "Task with ID 550e8400-e29b-41d4-a716-446655440000 not found"
  }
}
```

### Recurso Duplicado (409)

```json
{
  "success": false,
  "error": {
    "code": "DUPLICATE_ERROR",
    "message": "Task with this title already exists"
  }
}
```

## üîß Ejemplos de Uso

### Crear una Tarea Urgente

```bash
curl -X POST http://localhost:3000/api/tasks \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Tarea urgente",
    "description": "Esto es muy importante",
    "priority": "high",
    "dueDate": "2024-01-16T17:00:00.000Z"
  }'
```

### Obtener Tareas Pendientes de Alta Prioridad

```bash
curl "http://localhost:3000/api/tasks?completed=false&priority=high&sortBy=dueDate&sortOrder=asc"
```

### Buscar Tareas

```bash
curl "http://localhost:3000/api/tasks/search/importante"
```

### Completar M√∫ltiples Tareas

```bash
curl -X POST http://localhost:3000/api/tasks/bulk/complete \
  -H "Content-Type: application/json" \
  -d '{
    "ids": [
      "550e8400-e29b-41d4-a716-446655440000",
      "550e8400-e29b-41d4-a716-446655440001"
    ]
  }'
```

### Obtener Estad√≠sticas

```bash
curl http://localhost:3000/api/tasks/stats
```

### Filtrar por Fecha

```bash
curl "http://localhost:3000/api/tasks?dueDateFrom=2024-01-01&dueDateTo=2024-01-31"
```

## üîÑ Paginaci√≥n Avanzada

### Navegaci√≥n por P√°ginas

```bash
# Primera p√°gina
GET /api/tasks?page=1&limit=10

# P√°gina siguiente
GET /api/tasks?page=2&limit=10

# √öltima p√°gina (basada en totalPages del meta)
GET /api/tasks?page=5&limit=10
```

### Metadatos de Paginaci√≥n

```json
{
  "meta": {
    "pagination": {
      "page": 2,
      "limit": 10,
      "total": 50,
      "totalPages": 5,
      "hasNext": true,
      "hasPrev": true,
      "nextPage": 3,
      "prevPage": 1
    }
  }
}
```

## üìà Mejores Pr√°cticas

### Headers Recomendados

```bash
# Siempre incluir Content-Type para POST/PUT/PATCH
Content-Type: application/json

# Para debugging
X-Correlation-ID: unique-request-id

# Informaci√≥n del cliente
X-Client-Version: 1.0.0
```

### Manejo de Errores en Cliente

```javascript
try {
  const response = await fetch('/api/tasks', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(taskData)
  });
  
  const result = await response.json();
  
  if (!result.success) {
    console.error('Error:', result.error.message);
    if (result.error.details) {
      console.error('Details:', result.error.details);
    }
  }
} catch (error) {
  console.error('Network error:', error);
}
```

### Validaci√≥n de Datos

Siempre validar datos antes de enviar:

```javascript
const isValidTask = (task) => {
  return task.title && 
         task.title.length >= 1 && 
         task.title.length <= 200 &&
         ['low', 'medium', 'high'].includes(task.priority);
};
```

---

## üìû Soporte

Para reportar problemas o solicitar funcionalidades:
- **Issues:** [GitHub Issues](https://github.com/tu-usuario/todo-api/issues)
- **Discusiones:** [GitHub Discussions](https://github.com/tu-usuario/todo-api/discussions)
- **Email:** tu-email@ejemplo.com

---

**√öltima actualizaci√≥n:** Enero 2024  
**Versi√≥n de la API:** 1.0.0